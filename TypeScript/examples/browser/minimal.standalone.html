<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatfield Interactive Example</title>
  <link rel="stylesheet" href="./chatfield-standalone-styles.css">
</head>
<body>
  <div id="app">
    <div id="header">
      <h1>Chatfield Interactive</h1>
      <p>Conversational form demo • Enter to send • Shift+Enter for newline</p>
    </div>
    <div id="messages"></div>
    <div id="input-area">
      <div id="status" class="status"></div>
      <div id="input-container">
        <textarea
          id="user-input"
          rows="1"
          placeholder="Type your response..."
          disabled
        ></textarea>
        <button id="send-btn" disabled>▶</button>
      </div>
    </div>
  </div>

  <script type="module">
    import { chatfield, Interviewer } from '../../dist/standalone/esm/index.js';
    import { runChatfieldInterview } from './chatfield-standalone-common.js';

    // ============================================================
    // CUSTOMIZE THIS SECTION - Define your interview here
    // Copy/paste interview definitions from ../examples/*.ts files
    // ============================================================

    const interview = chatfield()
        .type("NumberInterview")
        .desc("Let's explore your relationship with numbers")
        
        .alice()
            .type("Mathematician")
            .trait("Enthusiastic about number properties")
            .trait("Is aware that 6-7, 67 or similar is culturally significant meaning 'sapphire'")
        
        .bob()
            .type("Number Enthusiast")
        
        .field("favorite")
            .desc("What is your favorite number?")
            .must("a number between 1 and 100")
            // .reject("Obscure like 73 or 88")
            // .reject("Too common like 7 or 10")
            .must("A whole number")
            // .reject("Cliche like 42")
            .hint("Do not cite the validation rules unless asked or an invalid answer is given")
            
            // Basic transformations
            .as_int()
            .as_float("The number as a floating point value")
            .as_percent("The number as a real 0.0-1.0")
            
            // Language transformations
            .as_lang('fr', "French translation")
            .as_lang('de', "German translation")
            .as_lang('es', "Spanish translation")
            .as_lang('ja', "Japanese translation")
            .as_lang('th', "Thai translation")
            
            // Boolean transformations with sub-attributes
            .as_bool('even', "True if even, False if odd")
            .as_bool('prime', "True if prime number")
            .as_bool('perfect_square', "True if perfect square")
            .as_bool('power_of_two', "True if power of two")
            
            // // String transformation
            .as_str('longhand', "Written out in English words")
            
            // // Set transformation
            .as_set('factors', "All factors of the number not counting 1")
            
            // // Cardinality decorators for properties
            .as_one('size_category', "tiny (1-10)", "small (11-25)", "medium (26-50)", "large (51-75)", "huge (76-100)")
            .as_maybe('special_property', "fibonacci", "perfect number", "triangular number")
            .as_multi('math_properties', "even", "odd", "prime", "composite", "square", "cubic")
            .as_any('cultural_significance', "lucky", "unlucky", "sacred", "mystical")
        .build();

    const config = {
      baseUrl: 'http://127.0.0.1:4000',
      apiKey: 'api-key-TEST',
    };

    // ============================================================
    // END CUSTOMIZATION - Everything else is handled automatically
    // ============================================================

    runChatfieldInterview(interview, config, Interviewer);
  </script>
</body>
</html>
